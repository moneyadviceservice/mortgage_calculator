<% content_for(:head) do %>
  <script>
   window.calculator_config = <%= raw calculator_config_json %>;
  </script>
<% end %>

<div ng-controller="CalculatorCtrl" class="mortgagecalc__container stamp-duty">
  <% resource.errors.full_messages.each do |m| %>
    <span style="color:red;"><%= m %></span>
  <% end %>
  <div wizard on-finish="finishedWizard()" hide-indicators='true'>
    <div wz-step class="ng-hide">
      <div class="stamp-duty__container">
        <h1 class="stamp-duty__heading"><%= I18n.t("#{i18n_locale_namespace}.heading") %></h1>
        <h2 class="intro stamp-duty__subheading"><%= I18n.t("#{i18n_locale_namespace}.title") %></h2>
        <p>
          <%= I18n.t("#{i18n_locale_namespace}.subtitle") %>
          <a href="https://www.moneyadviceservice.org.uk/en/tools/house-buying/land-and-buildings-transaction-tax-calculator-scotland" target="_blank">
            <%= I18n.t("#{i18n_locale_namespace}.subtitle_href_scotland") %>
          </a>
          <%= I18n.t("#{i18n_locale_namespace}.subtitle_href_separator") %>
          <a href="https://www.moneyadviceservice.org.uk/en/tools/house-buying/land-transaction-tax-calculator-wales" target="_blank">
            <%= I18n.t("#{i18n_locale_namespace}.subtitle_href_wales") %>
          </a>
          <%= I18n.t("#{i18n_locale_namespace}.subtitle_2") %>
        </p>
        <%= render 'form_step1' %>

        <hr />

        <h2><%= I18n.t("#{i18n_locale_namespace}.elsewhere.title") %></h2>
        <p><%= I18n.t("#{i18n_locale_namespace}.elsewhere.body") %></p>
      </div>

      <%= render 'mortgage_calculator/shared/links_to_other_tools' %>
    </div>

    <div wz-step class="ng-hide">
      <div class="stamp-duty__container">
        <div class="rendered-from-js">
          <h1 class="stamp-duty__heading"><%= I18n.t("#{i18n_locale_namespace}.heading_results") %></h1>
          <%= render 'form_step2', rates: @rates %>
        </div>
      </div>
    </div>
  </div>
</div>
